<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">
	<xacro:macro name="omni-picker" params="name">
		<xacro:property name="mesh_path" value="file://$(find agibot_omni_description)/meshes/omni_picker"/>
		<xacro:property name="prefix" value="${name + '_' if name else ''}"/>
		<xacro:property name="PI" value="3.1415926535897931"/>

		<link name="${prefix}gripper_base">
			<inertial>
				<origin xyz="-0.00005520 1.2341E-05 0.03296193"/>
				<mass value="0.25641368"/>
				<inertia ixx="4.6351E-04" ixy="-1.0E-08" ixz="-1.04E-06" iyy="4.4525E-04" iyz="-5.00E-08" izz="1.0438E-04"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/gripper_base.obj"/>
				</geometry>
			</visual>
		</link>

		<link name="${prefix}narrow1_Link">
			<inertial>
				<origin xyz="0.0094685 0.0068806 6.5437E-05"/>
				<mass value="0.025428"/>
				<inertia
						ixx="1.9574E-06"
						ixy="-4.2911E-07"
						ixz="-3.7111E-11"
						iyy="2.3919E-06"
						iyz="-3.008E-10"
						izz="1.5501E-06"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/narrow_1.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/narrow_1.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}gripper_joint" type="revolute">
			<origin xyz="0 -0.0195 0.0565" rpy="-2.9951 -${PI/2} -0.15964"/>
			<parent link="${prefix}gripper_base"/>
			<child link="${prefix}narrow1_Link"/>
			<axis xyz="0 0 1"/>
			<limit lower="0" upper="1" effort="50" velocity="${PI}"/>
		</joint>

		<link name="${prefix}narrow2_Link">
			<inertial>
				<origin xyz="0.0088027 -0.007035 1.6424E-05"/>
				<mass value="0.0040132"/>
				<inertia
						ixx="1.0307E-07"
						ixy="5.7851E-08"
						ixz="9.5801E-11"
						iyy="1.1385E-07"
						iyz="-2.81E-11"
						izz="1.7009E-07"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/narrow_2.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/narrow_2.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}narrow2_joint" type="revolute">
			<origin xyz="0.030852 0.018551 0"/>
			<parent link="${prefix}narrow1_Link"/>
			<child link="${prefix}narrow2_Link"/>
			<axis xyz="0 0 -1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="0.02" offset="0"/>
		</joint>

		<link name="${prefix}narrow3_Link">
			<inertial>
				<origin xyz="0.012508 -0.0079729 9.4339E-05"/>
				<mass value="0.018029"/>
				<inertia
						ixx="1.1403E-06"
						ixy="5.5159E-07"
						ixz="-4.0096E-13"
						iyy="2.5704E-06"
						iyz="1.0951E-12"
						izz="2.3252E-06"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/narrow_3.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/narrow_3.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}narrow3_joint" type="revolute">
			<origin xyz="0.018118 -0.01574 0"/>
			<parent link="${prefix}narrow2_Link"/>
			<child link="${prefix}narrow3_Link"/>
			<axis xyz="0 0 -1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="0.4" offset="0"/>
		</joint>

		<link name="${prefix}narrow4_Link"/>
		<joint name="${prefix}narrow4_joint" type="fixed">
			<origin xyz="0 -0.0104 0"/>
			<parent link="${prefix}narrow3_Link"/>
			<child link="${prefix}narrow4_Link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
		</joint>

		<link name="${prefix}narrow_loop_Link">
			<inertial>
				<origin xyz="0.014869 -0.0036066 0.00029307"/>
				<mass value="0.022591"/>
				<inertia
						ixx="4.3916E-06"
						ixy="1.114E-07"
						ixz="-4.9655E-12"
						iyy="4.737E-06"
						iyz="1.7121E-11"
						izz="6.0445E-07"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/narrow_loop.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/narrow_loop.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}narrow_loop_joint" type="revolute">
			<origin xyz="0 -0.021633 0.07387" rpy="-2.9951 -${PI/2} -0.15964"/>
			<parent link="${prefix}gripper_base"/>
			<child link="${prefix}narrow_loop_Link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="1.5" offset="0"/>
		</joint>

		<link name="${prefix}wide1_Link">
			<inertial>
				<origin xyz="0.0095051 -0.0068479 6.8268E-05"/>
				<mass value="0.025428"/>
				<inertia
						ixx="1.9565E-06"
						ixy="4.2798E-07"
						ixz="2.3844E-10"
						iyy="2.3928E-06"
						iyz="-1.4454E-10"
						izz="1.5501E-06"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/wide_1.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/wide_1.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}wide1_joint" type="revolute">
			<origin xyz="0 0.0195 0.0565" rpy="-2.9951 -${PI/2} -0.15964"/>
			<parent link="${prefix}gripper_base"/>
			<child link="${prefix}wide1_Link"/>
			<axis xyz="0 0 -1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="1" offset="0"/>
		</joint>

		<link name="${prefix}wide2_Link">
			<inertial>
				<origin xyz="0.0088027 0.007035 -1.6424E-05"/>
				<mass value="0.0040132"/>
				<inertia
						ixx="1.0307E-07"
						ixy="-5.7851E-08"
						ixz="-9.58E-11"
						iyy="1.1385E-07"
						iyz="-2.81E-11"
						izz="1.7009E-07"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/wide_2.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/wide_2.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}wide2_joint" type="revolute">
			<origin xyz="0.030852 -0.018551 0"/>
			<parent link="${prefix}wide1_Link"/>
			<child link="${prefix}wide2_Link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="0.02" offset="0"/>
		</joint>

		<link name="${prefix}wide3_Link">
			<inertial>
				<origin xyz="0.016206 0.0094593 4.7668E-05"/>
				<mass value="0.035835"/>
				<inertia
						ixx="8.5056E-06"
						ixy="-1.1363E-06"
						ixz="-4.2908E-11"
						iyy="1.1235E-05"
						iyz="-2.9251E-11"
						izz="4.6309E-06"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/wide_3.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/wide_3.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}wide3_joint" type="revolute">
			<origin xyz="0.018118 0.01574 0"/>
			<parent link="${prefix}wide2_Link"/>
			<child link="${prefix}wide3_Link"/>
			<axis xyz="0 0 1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="0.4" offset="0"/>
		</joint>

		<link name="${prefix}wide4_Link"/>
		<joint name="${prefix}wide4_joint" type="fixed">
			<origin xyz="0 0.0104 0"/>
			<parent link="${prefix}wide3_Link"/>
			<child link="${prefix}wide4_Link"/>
		</joint>

		<link name="${prefix}wide_loop_Link">
			<inertial>
				<origin xyz="0.016268 0.0040555 0.00030323"/>
				<mass value="0.025142"/>
				<inertia
						ixx="5.887E-06"
						ixy="-1.1234E-07"
						ixz="2.1954E-11"
						iyy="6.236E-06"
						iyz="-9.473E-12"
						izz="6.2389E-07"/>
			</inertial>
			<visual>
				<geometry>
					<mesh filename="${mesh_path}/wide_loop.obj"/>
				</geometry>
			</visual>
			<collision>
				<geometry>
					<mesh filename="${mesh_path}/wide_loop.obj"/>
				</geometry>
			</collision>
		</link>

		<joint name="${prefix}wide_loop_joint" type="revolute">
			<origin xyz="0 0.021633 0.07387" rpy="-2.9951 -${PI/2} -0.15964"/>
			<parent link="${prefix}gripper_base"/>
			<child link="${prefix}wide_loop_Link"/>
			<axis xyz="0 0 -1"/>
			<limit lower="-${PI}" upper="${PI}" effort="50" velocity="${PI}"/>
			<mimic joint="${prefix}gripper_joint" multiplier="1.5" offset="0"/>
		</joint>

	</xacro:macro>
</robot>